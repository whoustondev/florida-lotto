<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Florida Lotto - Single Position Winning Numbers</title>

  <!-- Bootstrap CSS (v5.3) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">

  <!-- Navbar like winning numbers page -->
  <nav class="navbar navbar-dark bg-success">
    <div class="container">
      <a class="navbar-brand" href="/">Florida Lotto</a>
      <a href="/" class="btn btn-outline-light btn-sm">Back to Home</a>
    </div>
  </nav>

  <div class="container mt-4">
    <h1 class="text-success mb-4">Single Position Winning Numbers</h1>

    <form id="lottoForm" class="mb-4">
      <div class="mb-3">
        <label for="position" class="form-label">Enter the number position (1-6):</label>
        <input
          type="number"
          id="position"
          name="position"
          class="form-control"
          min="1"
          max="6"
          required
          placeholder="1 to 6"
        />
      </div>
      <button type="submit" class="btn btn-primary">Get Numbers</button>
    </form>

    <div id="result"></div>
  </div>

  <!-- Bootstrap JS Bundle (includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("lottoForm");
      const resultDiv = document.getElementById("result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const position = parseInt(document.getElementById("position").value);
        if (position < 1 || position > 6) {
          resultDiv.innerHTML =
            `<div class="alert alert-danger" role="alert">Please enter a valid position between 1 and 6.</div>`;
          return;
        }

        fetch(`/get_numbers?position=${position}`)
          .then((res) => res.json())
          .then((data) => {
            const numbers = data.numbers;
            if (!numbers || numbers.length === 0) {
              resultDiv.innerHTML = `<div class="alert alert-warning">No numbers found for that position.</div>`;
              return;
            }

            // Build table similar to winning numbers page style
            let tableHtml = `
              <table class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th># Draw</th>
                    <th>Number at Position ${position}</th>
                  </tr>
                </thead>
                <tbody>
            `;

            numbers.forEach((num, idx) => {
              tableHtml += `
                <tr>
                  <td>${idx + 1}</td>
                  <td>${num}</td>
                </tr>
              `;
            });

            tableHtml += `</tbody></table>`;

            resultDiv.innerHTML = tableHtml;
          })
          .catch((err) => {
            console.error("Fetch error:", err);
            resultDiv.innerHTML =
              `<div class="alert alert-danger" role="alert">Error fetching numbers. Please try again later.</div>`;
          });
      });
    });
  </script>

</body>
</html>
